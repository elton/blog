---
layout: post
title: 'Ubuntu 12.10 中自定义DNS服务器设置 '
date: 2012-11-13
wordpress_id: 1042
permalink: /blogs/1042
comments: true
categories:
- Linux
tags:
- DNS
- resolvconf
- server
- ubuntu

---
大家都知道，要修改Linux系统的DNS服务器，只需要编辑/etc/resolv.conf文件即可。然而在Ubuntu Server 12.10里面，打开这个文件后，虽然可以看到配置信息，但是同时也看到了文件头里醒目的两行注释：

```
#Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
```
大意是这个文件是由resolvconf程序进行动态生成的，请不要手动修改，修改的信息将会被覆盖。这究竟是怎么回事呢？

首先当然是不死心了，往里面添加了自己的DNS服务器地址后保存退出，发现能生效。看上去似乎没有什么问题了。

然而，在重启后，我添加的信息果然没有了！被系统自动覆盖了。

网上搜索了一下，发现了解决办法，原来只需要往resolvconf这个程序的目录里写入一个新配置文件就可以解决。让我们一起看看怎么样在Ubuntu 12.04 LTS Server版中配置自己的DNS服务器吧！

首先我们需要创建一个文件/etc/resolvconf/resolv.conf.d/tail：

```
#vim /etc/resolvconf/resolv.conf.d/tail
```
然后我们在这个文件里写入自己要添加的DNS服务器，格式与以前的/etc/resolv.conf文件一致：

nameserver 8.8.8.8
nameserver 8.8.4.4
然后输入wq保存退出。接下来我们重启下resolvconf程序，让配置生效：

```
#/etc/init.d/resolvconf restart
```
再去看看/etc/resolv.conf文件，自己添加的DNS服务器果然乖乖的写进去了！至此问题完美解决！

资料参考：http://askubuntu.com/questions/130452/how-do-i-add-a-dns-server-via-resolv-conf-ubuntu-12-04
